<template>
  <div :class="classObj" class="app-wrapper">
    <div v-if="device === 'mobile' && sidebar.opened" class="drawer-bg" @click="handleClickOutside"/>
    
    <navbar/>

    <div class="main-container">
      <sidebar 
        class="sidebar-container"
        :key="updateSidebar"
        v-if="$route.path !== '/plan-upgrade'"
        @getUpgradeModal="getUpgradeModal"
      />
      <app-main/>
    </div>

    <subscription-spammer v-if="subscriptionStatus === 'cancelled' || subscriptionStatus === 'paused'"/>

      <div class="show-upgrade">
        <el-dialog
          title="Get access to premium features"
          :visible.sync="upgradeUser"
        >
          <div class="container">

            <div class="icon-container">
              <div class="block">
                <svg width="42" height="46" viewBox="0 0 42 46" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M37.8007 4.63225L28.7294 4.6001L28.7007 9.9346C28.7007 9.95223 28.7133 9.96684 28.7294 9.96684H37.7713L37.8007 4.63225Z" fill="#304156"/>
                  <path d="M13.3002 4.63225L4.22888 4.6001L4.2002 9.9346C4.2002 9.95223 4.21279 9.96684 4.22888 9.96684H13.2708L13.3002 4.63225Z" fill="#304156"/>
                  <path d="M16.8003 38.3011C16.8003 38.3187 16.8136 38.3333 16.8297 38.3333H25.8709L25.9004 32.9988L16.8298 32.9666L16.8003 38.3011Z" fill="#304156"/>
                  <path d="M36.9235 17.6333C37.793 17.6333 38.4999 16.859 38.4999 15.9068V14.5666H40.1638C41.176 14.5666 41.9999 13.6643 41.9999 12.5557V2.01097C42 0.902358 41.176 0 40.1639 0H26.336C25.3238 0 24.4999 0.902358 24.4999 2.01097V12.5557C24.4999 13.6643 25.3238 14.5666 26.336 14.5666H28.7V15.9068C28.7 16.859 29.4069 17.6333 30.2764 17.6333H32.9V20.0421C31.9207 20.3212 31.1542 21.1607 30.8993 22.2332H23.7006C23.3877 20.9138 22.3006 19.9333 21 19.9333C19.6994 19.9333 18.6123 20.9138 18.2994 22.2332H11.1006C10.8458 21.1607 10.0793 20.3212 9.10001 20.0421V17.6333H11.7236C12.5931 17.6333 13.3 16.859 13.3 15.9068V14.5666H15.664C16.6762 14.5666 17.5001 13.6643 17.5001 12.5557V2.01097C17.5 0.902358 16.6761 0 15.6639 0H1.8361C0.823892 0 0 0.902358 0 2.01097V12.5557C0 13.6643 0.823892 14.5666 1.8361 14.5666H3.49998V15.9068C3.49998 16.859 4.20695 17.6333 5.07637 17.6333H7.7V20.0421C6.72074 20.3212 5.95423 21.1607 5.69944 22.2332H0.699962C0.313578 22.2333 0 22.576 0 23C0 23.424 0.313578 23.7666 0.699962 23.7666H5.69936C6.01227 25.0853 7.09937 26.0666 8.39997 26.0666C9.70056 26.0666 10.7877 25.0852 11.1006 23.7666H18.2994C18.5541 24.8391 19.3206 25.6786 20.2999 25.9577V28.3665H14.436C13.4238 28.3665 12.5999 29.2689 12.5999 30.3775V40.9222C12.5999 42.0308 13.4238 42.9331 14.436 42.9331H16.0999V44.2733C16.0999 45.2255 16.8069 45.9998 17.6763 45.9998H24.3235C25.1929 45.9998 25.8999 45.2255 25.8999 44.2733V42.9331H28.2638C29.276 42.9331 30.0999 42.0308 30.0999 40.9222V30.3776C30.0999 29.269 29.276 28.3666 28.2638 28.3666H21.6999V25.9578C22.6792 25.6787 23.4457 24.8392 23.7005 23.7667H30.8993C31.2122 25.0854 32.2993 26.0666 33.5999 26.0666C34.9005 26.0666 35.9876 25.0853 36.3005 23.7667H41.2999C41.6863 23.7667 41.9998 23.424 41.9998 23C41.9998 22.576 41.6863 22.2334 41.2999 22.2334H36.3005C36.0457 21.1609 35.2792 20.3214 34.2999 20.0423V17.6335H36.9235V17.6333ZM2.80002 9.93444V4.63218C2.80002 3.76892 3.44118 3.06669 4.22938 3.06669H13.2706C14.0588 3.06669 14.7 3.76892 14.7 4.63218V9.93444C14.7 10.7977 14.0588 11.4999 13.2706 11.4999H4.22938C3.44118 11.5 2.80002 10.7977 2.80002 9.93444ZM5.07637 16.1C4.97905 16.1 4.89999 16.0134 4.89999 15.9068V14.5666H11.8999V15.9068C11.8999 16.0134 11.8209 16.1 11.7236 16.1H5.07637ZM24.5 44.2734C24.5 44.38 24.421 44.4666 24.3236 44.4666H17.6764C17.5791 44.4666 17.5001 44.38 17.5001 44.2734V42.9332H24.5V44.2734V44.2734ZM25.8706 31.4333C26.6588 31.4333 27.3 32.1355 27.3 32.9988V38.301C27.3 39.1643 26.6588 39.8665 25.8706 39.8665H16.8294C16.0412 39.8665 15.4 39.1643 15.4 38.301V32.9988C15.4 32.1355 16.0412 31.4333 16.8294 31.4333H25.8706ZM28.7294 11.5C27.9412 11.5 27.3 10.7978 27.3 9.93453V4.63218C27.3 3.76892 27.9412 3.06669 28.7294 3.06669H37.7706C38.5588 3.06669 39.2 3.76892 39.2 4.63218V9.93444C39.2 10.7977 38.5588 11.4999 37.7706 11.4999H28.7294V11.5ZM30.2764 16.1C30.179 16.1 30.1 16.0134 30.1 15.9068V14.5666H37.0999V15.9068C37.0999 16.0134 37.0209 16.1 36.9235 16.1H30.2764Z" fill="#304156"/>
                </svg>
              </div>
              <div>
                <h4>Server Groups</h4>
                <span>Create server groups for ease of administration</span>
              </div>
            </div>

            <div class="icon-container">
              <div class="block">
                <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5.18201 12.5521L4.23138 11.6015L5.57075 10.2613C5.30157 10.13 5.00613 10.0608 4.70669 10.0596C3.5928 10.0596 2.68945 10.9629 2.68945 12.0768C2.68945 13.1907 3.5928 14.094 4.70669 14.094C5.82059 14.094 6.72394 13.1907 6.72394 12.0768C6.72268 11.7774 6.65354 11.4819 6.52221 11.2128L5.18201 12.5521Z" fill="#304156"/>
                <path d="M5.18201 28.6898L4.23138 27.7392L5.57075 26.399C5.30157 26.2677 5.00613 26.1985 4.70669 26.1973C3.5928 26.1973 2.68945 27.1006 2.68945 28.2145C2.68945 29.3284 3.5928 30.2317 4.70669 30.2317C5.82059 30.2317 6.72394 29.3284 6.72394 28.2145C6.72268 27.9151 6.65354 27.6196 6.52221 27.3505L5.18201 28.6898Z" fill="#304156"/>
                <path d="M5.18201 20.621L4.23138 19.6703L5.57075 18.3301C5.30157 18.1988 5.00613 18.1297 4.70669 18.1284C3.5928 18.1284 2.68945 19.0318 2.68945 20.1457C2.68945 21.2596 3.5928 22.1629 4.70669 22.1629C5.82059 22.1629 6.72394 21.2596 6.72394 20.1457C6.72268 19.8462 6.65354 19.5508 6.52221 19.2816L5.18201 20.621Z" fill="#304156"/>
                <path d="M30.2586 19.4731C31.4049 19.4756 32.5417 19.6748 33.6207 20.0615V2.66275C33.6207 1.54885 32.7173 0.645508 31.6034 0.645508H2.01724C0.903346 0.645508 0 1.54885 0 2.66275V32.249C0 33.3629 0.903346 34.2662 2.01724 34.2662H21.3445C19.6893 31.1416 19.7938 27.3777 21.6183 24.3491C23.4437 21.3201 26.7226 19.4699 30.2586 19.4731ZM21.5172 22.1627H16.1379V20.8179H21.5172V22.1627ZM21.5172 19.4731H10.0862V18.1283H21.5172V19.4731ZM14.7931 20.8179V22.1627H10.0862V20.8179H14.7931ZM14.7931 12.749V14.0938H10.0862V12.749H14.7931ZM10.0862 11.4041V10.0593H21.5172V11.4041H10.0862ZM25.5517 19.4731H22.8621V18.1283H25.5517V19.4731ZM25.5517 14.0938H16.1379V12.749H25.5517V14.0938ZM29.5862 11.4041H22.8621V10.0593H29.5862V11.4041ZM6.72414 1.99034H8.06897V3.33516H6.72414V1.99034ZM4.03448 1.99034H5.37931V3.33516H4.03448V1.99034ZM1.34483 1.99034H2.68966V3.33516H1.34483V1.99034ZM1.34483 4.67999H32.2759V6.02482H1.34483V4.67999ZM8.06897 28.2145C8.07359 29.761 7.02588 31.1122 5.52682 31.4927C4.02818 31.8737 2.46272 31.1861 1.72852 29.8249C0.994962 28.4641 1.28053 26.778 2.42195 25.7349C3.56379 24.6919 5.26878 24.5586 6.55814 25.4124L8.26607 23.7047L9.21669 24.6553L7.50897 26.3632C7.87397 26.9117 8.06897 27.5557 8.06897 28.2145ZM7.50897 18.2943C8.46443 19.7383 8.17151 21.6713 6.83046 22.7669C5.48963 23.8625 3.53669 23.7644 2.31247 22.5399C1.08805 21.3157 0.989919 19.3628 2.08553 18.0219C3.18115 16.6809 5.11413 16.388 6.55814 17.3434L8.26607 15.6357L9.21669 16.5863L7.50897 18.2943ZM7.50897 10.2253C8.46443 11.6693 8.17151 13.6023 6.83046 14.6979C5.48963 15.7935 3.53669 15.6954 2.31247 14.471C1.08805 13.2468 0.989919 11.2938 2.08553 9.95298C3.18115 8.61193 5.11413 8.31901 6.55814 9.27447L8.26607 7.56675L9.21669 8.51737L7.50897 10.2253ZM14.7931 30.2317H10.0862V28.8869H14.7931V30.2317ZM18.8276 30.2317H16.1379V28.8869H18.8276V30.2317ZM18.8276 27.5421H10.0862V26.1972H18.8276V27.5421Z" fill="#304156"/>
                <path d="M30.2585 20.8179C25.4307 20.8179 21.5171 24.7315 21.5171 29.5592C21.5171 34.387 25.4307 38.3006 30.2585 38.3006C35.0862 38.3006 38.9998 34.387 38.9998 29.5592C38.9944 24.7338 35.0839 20.8233 30.2585 20.8179ZM27.3717 33.3966C27.2456 33.5227 27.0748 33.5937 26.8964 33.5937C26.8603 33.5937 26.8245 33.5908 26.7888 33.5849C26.5753 33.5504 26.3917 33.4153 26.2946 33.2218L24.9498 30.5321L26.1534 29.9312L27.0805 31.7864L34.4901 24.377L35.4407 25.3277L27.3717 33.3966Z" fill="#304156"/>
              </svg>
              </div>
              <div>
                <h4>Templates</h4>
                <span>
                  Create server templates to apply across all of your managed servers.
                  Allow quick deployments to recently discovered security threats. 
                </span>
              </div>
            </div>

            <div class="icon-container">
              <div class="block" style="padding-left: 3px">
                <svg width="36" height="45" viewBox="0 0 36 56" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M17.0651 0L0 2.91386V53.4987L17.0669 55.424L36 52.9403V3.67181L17.0651 0ZM13.4488 5.46695L15.2579 5.19117V7.24301L13.4488 7.49451V5.46695ZM13.4488 8.52476L15.2579 8.28021V10.332L13.4488 10.5541V8.52476ZM13.4488 12.7013L15.2579 12.5018V14.5519L13.4488 14.7306V12.7013ZM13.4488 15.7591L15.2579 15.5909V17.641L13.4488 17.7884V15.7591ZM13.4488 19.8732L15.2579 19.7483V21.7984L13.4488 21.9042V19.8732ZM10.5697 5.95086L12.318 5.68722V7.70091L10.5697 7.94719V5.95086V5.95086ZM10.5697 8.95837L12.318 8.72249V10.7379L10.5697 10.953V8.95837V8.95837ZM10.5697 13.0655L12.318 12.873V14.8884L10.5697 15.0619V13.0655V13.0655ZM10.5697 16.0748L12.318 15.9117V17.9272L10.5697 18.0694V16.0748V16.0748ZM10.5697 20.1195L12.318 19.9998V22.0152L10.5697 22.1176V20.1195V20.1195ZM7.68183 6.37926L9.3729 6.1243V8.10676L7.68183 8.34265V6.37926ZM7.68183 9.33475L9.3729 9.10753V11.09L7.68183 11.2981V9.33475ZM7.68183 13.3743L9.3729 13.1887V15.1711L7.68183 15.3359V13.3743ZM7.68183 16.3297L9.3729 16.1736V18.1561L7.68183 18.2931V16.3297ZM7.68183 20.3085L9.3729 20.1923V22.1748L7.68183 22.2737V20.3085ZM4.80613 6.84583L6.43824 6.5978V8.54384L4.80613 8.77452V6.84583ZM4.80613 9.75275L6.43824 9.53247V11.4802L4.80613 11.6797V9.75275ZM4.80613 13.7211L6.43824 13.5408V15.4885L4.80613 15.6498V13.7211ZM4.80613 16.6281L6.43824 16.4772V18.4249L4.80613 18.5568V16.6281V16.6281ZM4.80613 20.5392L6.43824 20.4265V22.3743L4.80613 22.4679V20.5392ZM2.3068 7.25169L3.89034 7.0106V8.92715L2.3068 9.14916V7.25169ZM2.3068 10.1135L3.89034 9.90191V11.8185L2.3068 12.0145V10.1135ZM2.3068 14.0229L3.89034 13.8478V15.766L2.3068 15.9239V14.0229ZM2.3068 16.8848L3.89034 16.7391V18.6556L2.3068 18.7857V16.8848ZM2.3068 20.7369L3.89034 20.6277V22.5442L2.3068 22.6379V20.7369ZM2.3068 23.5988L3.89034 23.5172V25.4338L2.3068 25.4997V23.5988ZM2.33455 33.9516L3.9181 33.9707V35.8873L2.33455 35.8508V33.9516ZM2.33455 36.8169L3.9181 36.862V38.7768L2.33455 38.7127V36.8169ZM3.94585 45.5897L2.3623 45.4596V43.5587L3.94585 43.6714V45.5897ZM3.94585 42.6984L2.3623 42.5943V40.6934L3.94585 40.7784V42.6984ZM3.99961 32.0403H2.41434V30.1393L3.99961 30.1203V32.0403ZM3.99961 29.1472L2.41434 29.1785V27.2758L3.99961 27.2307V29.1472ZM4.80613 23.4461L6.43824 23.3611V25.3089L4.80613 25.3748V23.4461ZM4.83214 33.9551L6.46599 33.9742V35.9219L4.83214 35.8855V33.9551ZM4.83214 36.862L6.46599 36.9106V38.8549L4.83214 38.7907V36.862ZM6.49721 45.7736L4.86337 45.6417V43.713L6.49721 43.8258V45.7736ZM6.49721 42.8372L4.86337 42.7296V40.8027L6.49721 40.8894V42.8372ZM6.5475 32.0143L4.91366 32.0125V30.0838L6.5475 30.0647V32.0143ZM6.5475 29.0796L4.9154 29.1039V27.1752L6.54924 27.1283V29.0796H6.5475ZM7.68183 23.2658L9.3729 23.1773V25.1598L7.68183 25.2274V23.2658ZM7.70784 33.9586L9.39892 33.9776V35.9601L7.70784 35.9219V33.9586ZM7.70784 36.9158L9.39892 36.9609V38.9468L7.70784 38.8774V36.9158ZM9.43188 45.9834L7.7408 45.8447V43.883L9.43188 44.001V45.9834ZM9.43188 42.9967L7.7408 42.8874V40.9258L9.43188 41.0143V42.9967ZM9.48911 31.9813H7.7963V30.0162L9.48911 29.9954V31.9813V31.9813ZM9.48911 28.9946L7.7963 29.0258V27.0624L9.48911 27.0139V28.9946V28.9946ZM10.5697 23.127L12.318 23.0368V25.0522L10.5697 25.1216V23.127V23.127ZM10.5974 34.0019L12.3457 34.0245V36.0416L10.5974 36V34.0019ZM10.5974 37.0112L12.3457 37.0615V39.0769L10.5974 39.0058V37.0112ZM12.3822 46.2349L10.6321 46.0927V44.0981L12.3822 44.2195V46.2349ZM12.3822 43.1979L10.6321 43.0852V41.0888L12.3822 41.1825V43.1979ZM12.4377 31.9917H10.6859V29.9971L12.4377 29.9763V31.9917ZM12.4377 28.953L10.6859 28.9842V26.9879L12.4377 26.9376V28.953ZM13.4488 22.9327L15.2579 22.8373V24.8892L13.4488 24.962V22.9327ZM13.4818 33.9915L15.2908 34.0123V36.0642L13.4818 36.026V33.9915ZM13.4818 37.0459L15.2908 37.0996V39.1515L13.4818 39.0769V37.0459ZM15.3255 46.4326L13.5165 46.2835V44.2542L15.3255 44.3791V46.4326ZM15.3255 43.3401L13.5165 43.2239V41.1946L15.3255 41.2918V43.3401ZM15.3827 31.9466H13.572V29.9156L15.3827 29.8948V31.9466ZM15.3827 28.8541L13.572 28.8888V26.8595L15.3827 26.8057V28.8541ZM27.9331 13.7125L33.8909 14.4461V16.2014L27.9331 15.5336V13.7125ZM27.9123 16.4754L33.8718 17.1085V18.8655L27.9123 18.2983V16.4754ZM27.8932 20.4334L33.8528 20.9225V22.6795L27.8932 22.2563V20.4334ZM27.869 23.1981L33.832 23.5884V25.3453L27.869 25.021V23.1981ZM27.8481 27.1266L33.8111 27.3729V29.1299L27.8481 28.9495V27.1266ZM18.9227 12.7082L25.5344 13.5182V15.3671L18.9227 14.6317V12.7082ZM18.8984 15.6238L25.5136 16.3228V18.17L18.8984 17.5456V15.6238ZM18.8759 19.7986L25.4928 20.3398V22.1887L18.8759 21.7221V19.7986ZM18.8516 22.7159L25.4702 23.1443V24.9933L18.8516 24.6377V22.7159ZM18.8273 26.8578L25.4477 27.1266V28.9773L18.8273 28.7813V26.8578ZM18.7996 29.7768L25.4234 29.9364V31.7853L18.7996 31.7003V29.7768ZM25.4702 45.5151L18.8499 45.9782V44.0547L25.4702 43.6645V45.5151ZM25.4928 42.7088L18.8759 43.0574V41.1357L25.4928 40.8616V42.7088ZM25.5153 38.7213L18.9002 38.9121V36.9921L25.5153 36.8742V38.7213ZM25.5379 35.9167L18.9262 35.9965V34.0765L25.5379 34.0696V35.9167ZM25.5587 11.3866L18.9453 10.4899V8.56986L25.5587 9.53941V11.3866ZM25.583 8.58547L18.9713 7.57776V5.65774L25.583 6.73656V8.58547ZM27.8273 29.8913L33.7903 30.037V31.794L27.8273 31.7142V29.8913ZM33.8285 44.8387L27.8672 45.248V43.4251L33.8285 43.08V44.8387ZM33.851 42.1677L27.8898 42.4816V40.657L33.851 40.4124V42.1677ZM33.8684 38.3848L27.9123 38.5548V36.7302L33.8684 36.6279V38.3848ZM33.8927 35.719L27.9366 35.7867V33.9638H33.8927V35.719ZM33.91 12.4203L27.9557 11.6103V9.78917L33.91 10.6651V12.4203ZM33.9325 9.75968L27.9765 8.85084V7.02794L33.9325 8.00443V9.75968Z" fill="#304156"/>
                </svg>
              </div>
              <div>
                <h4>MSP Level</h4>
                <span>
                  Apply custom software fixes, threatlists, and filters across all 
                  of your managed servers with one click to protect 
                  against zero days and other threats.
                </span>
              </div>
            </div>

            <div class="icon-container">
              <div class="block">
                <svg width="38" height="40" viewBox="0 0 61 61" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M59.7617 51.4001V56.645C59.7617 59.0461 57.8078 61 55.4052 61H5.59279C3.19169 61 1.23779 59.0461 1.23779 56.645V51.4001C1.23779 48.999 3.19169 47.0451 5.59279 47.0451H16.3182V44.3439H6.10753C3.60738 44.3439 1.57545 42.3104 1.57545 39.8103V4.53208C1.57545 2.03343 3.60738 0 6.10753 0H54.8919C57.3906 0 59.424 2.03343 59.424 4.53208V39.8103C59.424 42.3104 57.3906 44.3439 54.8919 44.3439H44.6797V47.0451H55.4052C57.8078 47.0451 59.7617 48.999 59.7617 51.4001ZM57.5106 56.645V51.4001C57.5106 50.2401 56.5667 49.2961 55.4052 49.2961H5.59279C4.43276 49.2961 3.48883 50.2401 3.48883 51.4001V56.645C3.48883 57.805 4.43276 58.749 5.59279 58.749H55.4052C56.5667 58.749 57.5106 57.805 57.5106 56.645ZM57.173 39.8103V4.53208C57.173 3.2745 56.1495 2.25103 54.8919 2.25103H6.10753C4.84995 2.25103 3.82648 3.2745 3.82648 4.53208V39.8103C3.82648 41.0694 4.84995 42.0928 6.10753 42.0928H54.8919C56.1495 42.0928 57.173 41.0694 57.173 39.8103ZM42.4287 47.0451V44.3439H18.5692V47.0451H42.4287Z" fill="#304156"/>
                  <path d="M57.5106 51.4001V56.645C57.5106 57.805 56.5666 58.749 55.4051 58.749H5.59274C4.4327 58.749 3.48877 57.805 3.48877 56.645V51.4001C3.48877 50.2401 4.4327 49.2961 5.59274 49.2961H55.4051C56.5666 49.2961 57.5106 50.2401 57.5106 51.4001ZM54.4717 54.0218C54.4717 53.4005 53.9674 52.8963 53.3462 52.8963H49.9696C49.3483 52.8963 48.8441 53.4005 48.8441 54.0218C48.8441 54.6446 49.3483 55.1473 49.9696 55.1473H53.3462C53.9674 55.1473 54.4717 54.6446 54.4717 54.0218ZM28.3612 54.0218C28.3612 53.4005 27.857 52.8963 27.2357 52.8963H7.87678C7.2555 52.8963 6.75127 53.4005 6.75127 54.0218C6.75127 54.6446 7.2555 55.1473 7.87678 55.1473H27.2357C27.857 55.1473 28.3612 54.6446 28.3612 54.0218Z" fill="#304156"/>
                  <path d="M57.1732 4.53202V39.8102C57.1732 41.0693 56.1497 42.0928 54.8921 42.0928H6.10771C4.85013 42.0928 3.82666 41.0693 3.82666 39.8102V4.53202C3.82666 3.27445 4.85013 2.25098 6.10771 2.25098H54.8921C56.1497 2.25098 57.1732 3.27445 57.1732 4.53202ZM54.9221 38.7162V5.62753C54.9221 5.00624 54.4179 4.50201 53.7966 4.50201H7.20321C6.58042 4.50201 6.07769 5.00624 6.07769 5.62753V38.7162C6.07769 39.3375 6.58042 39.8417 7.20321 39.8417H53.7966C54.4179 39.8417 54.9221 39.3375 54.9221 38.7162Z" fill="white"/>
                  <path d="M54.9221 5.62771V38.7164C54.9221 39.3377 54.4178 39.8419 53.7965 39.8419H7.20315C6.58037 39.8419 6.07764 39.3377 6.07764 38.7164V5.62771C6.07764 5.00643 6.58037 4.5022 7.20315 4.5022H53.7965C54.4178 4.5022 54.9221 5.00643 54.9221 5.62771ZM52.671 37.5909V32.9402H43.7254C43.2797 34.0373 42.2022 34.8146 40.9461 34.8146C39.2909 34.8146 37.9448 33.4685 37.9448 31.8132C37.9448 30.1595 39.2909 28.8119 40.9461 28.8119C42.2022 28.8119 43.2797 29.5907 43.7269 30.6892H52.671V11.779H35.6547L32.8259 14.6093C32.9925 14.983 33.0885 15.3972 33.0885 15.8324C33.0885 17.4862 31.7409 18.8338 30.0872 18.8338C28.4319 18.8338 27.0858 17.4862 27.0858 15.8324C27.0858 14.1771 28.4319 12.831 30.0872 12.831C30.4818 12.831 30.857 12.9091 31.2037 13.0486L34.3941 9.85816C34.6042 9.64656 34.8909 9.528 35.1895 9.528H52.671V6.75323H8.32867V16.5827H15.61L18.4403 13.7524C18.2737 13.3788 18.1777 12.9646 18.1777 12.5294C18.1777 10.8756 19.5238 9.528 21.1791 9.528C22.8343 9.528 24.1804 10.8756 24.1804 12.5294C24.1804 14.1846 22.8343 15.5308 21.1791 15.5308C20.7844 15.5308 20.4077 15.4527 20.0626 15.3132L16.8721 18.5036C16.662 18.7152 16.3754 18.8338 16.0767 18.8338H8.32867V21.0473H39.2564C39.7021 19.9488 40.7796 19.1699 42.0371 19.1699C43.6909 19.1699 45.0385 20.5175 45.0385 22.1713C45.0385 23.8266 43.6909 25.1727 42.0371 25.1727C40.7796 25.1727 39.7036 24.3953 39.2564 23.2983H8.32867V25.5118H26.0563C26.3549 25.5118 26.6416 25.6304 26.8517 25.8405L30.0406 29.0295C30.3873 28.8914 30.7625 28.8119 31.1571 28.8119C32.8124 28.8119 34.1585 30.1595 34.1585 31.8132C34.1585 33.4685 32.8124 34.8146 31.1571 34.8146C29.5034 34.8146 28.1558 33.4685 28.1558 31.8132C28.1558 31.378 28.2518 30.9653 28.4184 30.5917L25.5896 27.7629H8.32867V30.2675H17.6479C18.0937 29.169 19.1711 28.3917 20.4272 28.3917C22.0825 28.3917 23.4286 29.7378 23.4286 31.393C23.4286 33.0468 22.0825 34.3944 20.4272 34.3944C19.1711 34.3944 18.0937 33.6171 17.6479 32.5186H8.32867V37.5909H52.671ZM42.7875 22.1713C42.7875 21.7586 42.4498 21.421 42.0371 21.421C41.623 21.421 41.2868 21.7586 41.2868 22.1713C41.2868 22.5855 41.623 22.9217 42.0371 22.9217C42.4498 22.9217 42.7875 22.5855 42.7875 22.1713ZM41.6965 31.8132C41.6965 31.4005 41.3603 31.0629 40.9461 31.0629C40.532 31.0629 40.1958 31.4005 40.1958 31.8132C40.1958 32.2274 40.532 32.5636 40.9461 32.5636C41.3603 32.5636 41.6965 32.2274 41.6965 31.8132ZM31.9075 31.8132C31.9075 31.4005 31.5713 31.0629 31.1571 31.0629C30.7445 31.0629 30.4068 31.4005 30.4068 31.8132C30.4068 32.2274 30.7445 32.5636 31.1571 32.5636C31.5713 32.5636 31.9075 32.2274 31.9075 31.8132ZM30.8375 15.8324C30.8375 15.4182 30.4998 15.0821 30.0872 15.0821C29.673 15.0821 29.3368 15.4182 29.3368 15.8324C29.3368 16.2451 29.673 16.5827 30.0872 16.5827C30.4998 16.5827 30.8375 16.2451 30.8375 15.8324ZM21.9294 12.5294C21.9294 12.1167 21.5933 11.779 21.1791 11.779C20.7649 11.779 20.4287 12.1167 20.4287 12.5294C20.4287 12.9436 20.7649 13.2797 21.1791 13.2797C21.5933 13.2797 21.9294 12.9436 21.9294 12.5294ZM21.1776 31.393C21.1776 30.9788 20.8414 30.6427 20.4272 30.6427C20.0145 30.6427 19.6769 30.9788 19.6769 31.393C19.6769 31.8057 20.0145 32.1434 20.4272 32.1434C20.8414 32.1434 21.1776 31.8057 21.1776 31.393Z" fill="#304156"/>
                  <path d="M53.3463 52.8962C53.9676 52.8962 54.4718 53.4005 54.4718 54.0218C54.4718 54.6445 53.9676 55.1473 53.3463 55.1473H49.9698C49.3485 55.1473 48.8442 54.6445 48.8442 54.0218C48.8442 53.4005 49.3485 52.8962 49.9698 52.8962H53.3463Z" fill="white"/>
                  <path d="M42.037 21.4209C42.4497 21.4209 42.7873 21.7586 42.7873 22.1712C42.7873 22.5854 42.4497 22.9216 42.037 22.9216C41.6228 22.9216 41.2866 22.5854 41.2866 22.1712C41.2866 21.7586 41.6228 21.4209 42.037 21.4209Z" fill="white"/>
                  <path d="M40.9457 31.0627C41.3598 31.0627 41.696 31.4004 41.696 31.8131C41.696 32.2273 41.3598 32.5634 40.9457 32.5634C40.5315 32.5634 40.1953 32.2273 40.1953 31.8131C40.1953 31.4004 40.5315 31.0627 40.9457 31.0627Z" fill="white"/>
                  <path d="M31.1571 31.0627C31.5713 31.0627 31.9074 31.4004 31.9074 31.8131C31.9074 32.2273 31.5713 32.5634 31.1571 32.5634C30.7444 32.5634 30.4067 32.2273 30.4067 31.8131C30.4067 31.4004 30.7444 31.0627 31.1571 31.0627Z" fill="white"/>
                  <path d="M30.0873 15.0818C30.4999 15.0818 30.8376 15.4179 30.8376 15.8321C30.8376 16.2448 30.4999 16.5825 30.0873 16.5825C29.6731 16.5825 29.3369 16.2448 29.3369 15.8321C29.3369 15.4179 29.6731 15.0818 30.0873 15.0818Z" fill="white"/>
                  <path d="M27.2359 52.8962C27.8571 52.8962 28.3614 53.4005 28.3614 54.0218C28.3614 54.6445 27.8571 55.1473 27.2359 55.1473H7.87698C7.2557 55.1473 6.75146 54.6445 6.75146 54.0218C6.75146 53.4005 7.2557 52.8962 7.87698 52.8962H27.2359Z" fill="white"/>
                  <path d="M21.1791 11.7791C21.5932 11.7791 21.9294 12.1167 21.9294 12.5294C21.9294 12.9436 21.5932 13.2797 21.1791 13.2797C20.7649 13.2797 20.4287 12.9436 20.4287 12.5294C20.4287 12.1167 20.7649 11.7791 21.1791 11.7791Z" fill="white"/>
                  <path d="M20.4271 30.6426C20.8413 30.6426 21.1774 30.9787 21.1774 31.3929C21.1774 31.8056 20.8413 32.1433 20.4271 32.1433C20.0144 32.1433 19.6768 31.8056 19.6768 31.3929C19.6768 30.9787 20.0144 30.6426 20.4271 30.6426Z" fill="white"/>
                </svg>
              </div>
              <div>
                <h4>Up to 1,000 servers</h4>
                <span>Manage up to 1,000 servers from a single pane of glass</span>
              </div>
            </div>
          </div>
          <span slot="footer" class="dialog-footer">
            <el-button class="button-modal not-now" @click="upgradeUser = false">Not now</el-button>
            <el-button class="button-modal" type="primary" @click="upgradePlan">Upgrade</el-button>
          </span>
        </el-dialog>
    </div>
  </div>
</template>

<script>
import { Navbar, Sidebar, AppMain } from './components'
import ResizeMixin from './mixin/ResizeHandler'

export default {
  name: 'Layout',
  data () {
    return {
      upgradeUser: false,
      updateSidebar: 1
    }
  },
  components: {
    Navbar,
    Sidebar,
    AppMain,
    subscriptionSpammer: () => import('@/components/SubscriptionSpammer/index.vue'),
    infoSpammer: () => import('@/components/InfoSpammer/index.vue')
  },
  mixins: [ResizeMixin],
  computed: {
    subscriptionStatus () {
      return this.$store.getters.subscriptionStatus
    },
    sidebar() {
      return this.$store.state.app.sidebar
    },
    device() {
      return this.$store.state.app.device
    },
    classObj() {
      return {
        hideSidebar: !this.sidebar.opened,
        openSidebar: this.sidebar.opened,
        withoutAnimation: this.sidebar.withoutAnimation,
        mobile: this.device === 'mobile' || this.$route.path === '/plan-upgrade'
      }
    },
  },
  methods: {
    handleClickOutside() {
      this.$store.dispatch('CloseSideBar', { withoutAnimation: false })
    },

    getUpgradeModal () {
      this.upgradeUser = true
    },

    upgradePlan () {
      let route = this.$router.resolve({name: 'Plan upgrade'});
      window.open(route.href, '_blank');
      this.upgradeUser = false
      this.upgradeUser = ++this.updateSidebar
    }
  },

  watch: {
    upgradeUser (data) {
      if (!data) {
        this.upgradeUser = false
        this.updateSidebar = ++this.updateSidebar
      }
    } 
  },

  mounted() {
    this.handleClickOutside()
  }
}
</script>
<style lang="scss">
  .app-wrapper {
    .drawer-bg {
      height: 100vh !important;
      width: 100vw !important;
      z-index: 5 !important;
    }
    .show-upgrade {
      .el-dialog__body {
        border-bottom: 1px solid rgb(231, 231, 231) !important;
        color: rgb(0, 0, 0);
        padding-top: 3px;
        padding-bottom: 2.5rem;
      span {
        font-size: 12px;
        color: rgb(83, 83, 83);
      }
    }
    .el-dialog__title {
      color: rgb(0, 0, 0);
      font-size: 22px;
      font-weight: 500;
    }
    .el-dialog__header {
      padding-bottom: 2px;
      position: relative;
    }
    .icon-container {
      display: flex;
      justify-content: start;
      align-items: start;
      margin-top: 1.4rem;
      margin-right: 1.7rem;
        h4 {
          margin: 3px 0 7px 0;
        };
      .block {
        width: 40px;
        margin-right: 1.7rem;
      }
    }
      .button-modal {
        width: 100px;
        height: 30px !important;
        padding: 5px;
      };
    }
  }

  @media screen and (max-width: 420px) {
    .app-wrapper {
      .show-upgrade {
        .icon-container {
          flex-direction: column;
          h4 {
            margin: 15px 0 18px 0 !important;
          };
        }
        .not-now {
          margin-bottom: .5rem;
        }
        .button-modal {
          margin-left: 0;
        }
        .el-dialog {
          overflow-x: scroll;
        }
      }
    }
  }

  @media screen and (max-width: 520px) {
    .app-wrapper {
      .show-upgrade {
        .not-now {
          margin-bottom: .5rem;
        }
      }
    }
  }
</style>

<style rel="stylesheet/scss" lang="scss" scoped>
  @import "src/styles/mixin.scss";
  .app-wrapper {
    @include clearfix;
    position: relative;
    height: 100%;
    width: 100%;
    &.mobile.openSidebar{
      position: fixed;
      top: 0;
      left: 0;
    }
    .container {
      display: grid;
      grid-gap: 10px;
      grid-template-columns: 1fr 1fr;
      justify-content: center;
      margin-top: .7rem;
    }
  }
  @media screen and (max-width: 860px) {
    .app-wrapper {
      .container {
        grid-template-columns: 1fr;
      }
    }
  }
  .drawer-bg {
    background: #000;
    opacity: 0.3;
    width: 100%;
    top: 0;
    height: 100%;
    position: absolute;
    z-index: 999;
  }
</style>
